(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42893503"],{"1dde":function(e,t,r){var a=r("d039"),s=r("b622"),l=r("2d00"),n=s("species");e.exports=function(e){return l>=51||!a((function(){var t=[],r=t.constructor={};return r[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,r){var a=r("861d"),s=r("e8b5"),l=r("b622"),n=l("species");e.exports=function(e,t){var r;return s(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?a(r)&&(r=r[n],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var a=r("c04e"),s=r("9bf2"),l=r("5c6c");e.exports=function(e,t,r){var n=a(t);n in e?s.f(e,n,l(0,r)):e[n]=r}},a434:function(e,t,r){"use strict";var a=r("23e7"),s=r("23cb"),l=r("a691"),n=r("50c4"),o=r("7b0b"),i=r("65f0"),c=r("8418"),u=r("1dde"),m=u("splice"),d=Math.max,p=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var r,a,u,m,h,v,x=o(this),g=n(x.length),y=s(e,g),k=arguments.length;if(0===k?r=a=0:1===k?(r=0,a=g-y):(r=k-2,a=p(d(l(t),0),g-y)),g+r-a>f)throw TypeError(b);for(u=i(x,a),m=0;m<a;m++)h=y+m,h in x&&c(u,m,x[h]);if(u.length=a,r<a){for(m=y;m<g-a;m++)h=m+a,v=m+r,h in x?x[v]=x[h]:delete x[v];for(m=g;m>g-a+r;m--)delete x[m-1]}else if(r>a)for(m=g-a;m>y;m--)h=m+a-1,v=m+r-1,h in x?x[v]=x[h]:delete x[v];for(m=0;m<r;m++)x[m+y]=arguments[m+2];return x.length=g-a+r,u}})},b0c0:function(e,t,r){var a=r("83ab"),s=r("9bf2").f,l=Function.prototype,n=l.toString,o=/^\s*function ([^ (]*)/,i="name";a&&!(i in l)&&s(l,i,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(e){return""}}})},e8b5:function(e,t,r){var a=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},f367:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"职业")]),r("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[r("el-tabs",{attrs:{type:"border-card",value:"basic"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"称号"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),r("el-form-item",{attrs:{label:"热门"}},[r("el-switch",{model:{value:e.model.hot,callback:function(t){e.$set(e.model,"hot",t)},expression:"model.hot"}})],1),r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"avatar",t.url)}}},[e.model.avatar?r("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"Banner"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"banner",t.url)}}},[e.model.banner?r("img",{staticClass:"avatar",attrs:{src:e.model.banner}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"难度"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),r("el-form-item",{attrs:{label:"技能"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),r("el-form-item",{attrs:{label:"攻击"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),r("el-form-item",{attrs:{label:"生存"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),r("el-form-item",{attrs:{label:"专精选择"}},[r("el-select",{attrs:{multiple:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),r("el-form-item",{attrs:{label:"介绍视频链接"}},[r("el-input",{model:{value:e.model.video,callback:function(t){e.$set(e.model,"video",t)},expression:"model.video"}})],1),r("el-form-item",{attrs:{label:"对抗技巧"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),r("el-form-item",{attrs:{label:"使用武器"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.model.tools,callback:function(t){e.$set(e.model,"tools",t)},expression:"model.tools"}})],1)],1),r("el-tab-pane",{attrs:{label:"特点",name:"features"}},[r("el-button",{attrs:{plain:"",type:"info",size:"small"},on:{click:function(t){return e.model.features.push({})}}},[r("i",{staticClass:"el-icon-plus"}),e._v("添加特点 ")]),r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.features,(function(t,a){return r("el-col",{key:a,attrs:{md:12}},[r("el-divider"),r("el-form-item",{attrs:{label:"特点名称"}},[r("el-input",{model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("el-form-item",{attrs:{label:"图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(r){return e.$set(t,"icon",r.url)}}},[t.icon?r("img",{staticClass:"avatar",attrs:{src:t.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(r){e.$set(t,"description",r)},expression:"item.description"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.features.splice(a,1)}}},[e._v("删除")])],1)],1)})),1)],1),r("el-tab-pane",{attrs:{label:"搭档",name:"partners"}},[r("el-button",{attrs:{type:"info",plain:"",size:"small"},on:{click:function(t){return e.model.partners.push({})}}},[r("i",{staticClass:"el-icon-plus"}),e._v("添加搭档 ")]),r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.partners,(function(t,a){return r("el-col",{key:a,attrs:{md:12}},[r("el-form-item",{attrs:{label:"职业"}},[r("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(r){e.$set(t,"hero",r)},expression:"item.hero"}},e._l(e.heroes,(function(e){return r("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1)],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(r){e.$set(t,"description",r)},expression:"item.description"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.partners.splice(a,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{attrs:{type:"warning","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},s=[],l=r("1da1"),n=(r("96cf"),r("b0c0"),r("a434"),{props:{id:{}},data:function(){return{items:[],categories:[],heroes:[],model:{name:"",avatar:"",features:[],partners:[],strategies:[],scores:{difficult:0}}}},methods:{save:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.model.name){t.next=3;break}return e.$message.error("职业名称不能为空"),t.abrupt("return");case 3:if(!e.id){t.next=9;break}return t.next=6,e.$http.put("rest/heroes/".concat(e.id),e.model);case 6:t.sent,t.next=12;break;case 9:return t.next=11,e.$http.post("rest/heroes",e.model);case 11:t.sent;case 12:e.$router.push("/heroes/list"),e.$message({type:"success",message:"保存成功"});case 14:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes/".concat(e.id));case 2:r=t.sent,e.model=Object.assign({},e.model,r.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCategories:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes/cate");case 2:r=t.sent,e.categories=r.data;case 4:case"end":return t.stop()}}),t)})))()},fetchItems:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items");case 2:r=t.sent,e.items=r.data;case 4:case"end":return t.stop()}}),t)})))()},fetchHeroes:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes");case 2:r=t.sent,e.heroes=r.data;case 4:case"end":return t.stop()}}),t)})))()},addStrategy:function(){this.model.strategies.push({})},delStrategy:function(e){var t=this;this.$confirm("确认要删除该攻略?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.strategies.splice(e,1),t.$message.success("删除成功")}))},beforeVideo:function(e){if(-1==e.type.indexOf("video"))return this.$message.error("上传的文件不符合格式"),!1}},created:function(){this.id&&this.fetch(),this.fetchItems(),this.fetchHeroes(),this.fetchCategories()}}),o=n,i=r("2877"),c=Object(i["a"])(o,a,s,!1,null,"15f8264e",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-42893503.de551697.js.map