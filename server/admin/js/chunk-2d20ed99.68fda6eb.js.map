{"version":3,"sources":["webpack:///./src/views/VideoEdit.vue?6a51","webpack:///src/views/VideoEdit.vue","webpack:///./src/views/VideoEdit.vue?0c66","webpack:///./src/views/VideoEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","id","attrs","nativeOn","$event","preventDefault","save","apply","arguments","staticStyle","model","value","callback","$$v","$set","expression","staticClass","uploadURl","getAuthHeaders","res","url","directives","name","rawName","_l","item","key","_id","beforeVideo","video","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d20ed99.68fda6eb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(_vm._s(_vm.id ? '编辑':'新建')+\"视频\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{staticStyle:{\"width\":\"20rem\"},attrs:{\"placeholder\":\"请输入视频标题\"},model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"作者\"}},[_c('el-input',{staticStyle:{\"width\":\"20rem\"},attrs:{\"placeholder\":\"请输入作者名称\"},model:{value:(_vm.model.author),callback:function ($$v) {_vm.$set(_vm.model, \"author\", $$v)},expression:\"model.author\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像\"}},[_c('span',{staticClass:\"text-grey fs-xs\"},[_vm._v(\"tip:建议使用宽:高=1:1图片\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadURl,\"headers\":_vm.getAuthHeaders(),\"show-file-list\":false,\"on-success\":function (res){ return _vm.$set(_vm.model, 'avatar', res.url); }}},[(_vm.model.avatar)?_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.model.avatar),expression:\"model.avatar\"}],staticClass:\"avatar\"}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"所属分类\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.model.category),callback:function ($$v) {_vm.$set(_vm.model, \"category\", $$v)},expression:\"model.category\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"粉丝数\"}},[_c('el-input',{staticStyle:{\"width\":\"20rem\"},attrs:{\"placeholder\":\"请输入作者粉丝数量\"},model:{value:(_vm.model.fans),callback:function ($$v) {_vm.$set(_vm.model, \"fans\", $$v)},expression:\"model.fans\"}})],1),_c('el-form-item',{attrs:{\"label\":\"播放量\"}},[_c('el-input',{staticStyle:{\"width\":\"20rem\"},attrs:{\"placeholder\":\"请输入视频播放量\"},model:{value:(_vm.model.play),callback:function ($$v) {_vm.$set(_vm.model, \"play\", $$v)},expression:\"model.play\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('span',{staticClass:\"text-grey fs-xs\"},[_vm._v(\"tip:建议使用宽屏图片，宽:高=2:1最佳\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadURl,\"headers\":_vm.getAuthHeaders(),\"show-file-list\":false,\"on-success\":function (res){ return _vm.$set(_vm.model, 'cover', res.url); }}},[(_vm.model.cover)?_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.model.cover),expression:\"model.cover\"}],staticClass:\"avatar\"}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"视频\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadURl,\"show-file-list\":false,\"headers\":_vm.getAuthHeaders(),\"on-success\":function (res){ return _vm.$set(_vm.model, 'video', res.url); },\"before-upload\":_vm.beforeVideo}},[(_vm.model.video)?_c('video',{staticClass:\"avatar\",attrs:{\"controls\":\"\",\"src\":_vm.model.video}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"warning\",\"native-type\":\"el-submit\"}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <h1>{{id ? '编辑':'新建'}}视频</h1>\r\n        <el-form label-width = \"120px\" @submit.native.prevent = \"save\">\r\n            <el-form-item label = \"名称\">\r\n                <el-input v-model = \"model.title\" placeholder=\"请输入视频标题\" style = \"width: 20rem;\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label = \"作者\">\r\n                <el-input v-model = \"model.author\" placeholder=\"请输入作者名称\" style = \"width: 20rem;\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label = \"头像\">\r\n                <span class = \"text-grey fs-xs\">tip:建议使用宽:高=1:1图片</span>\r\n                <el-upload\r\n                    class=\"avatar-uploader\"\r\n                    :action=\"uploadURl\"\r\n                    :headers=\"getAuthHeaders()\"\r\n                    :show-file-list=\"false\"\r\n                    :on-success=\"res=>$set(model, 'avatar', res.url)\"\r\n                >\r\n                    <img v-if=\"model.avatar\" v-lazy=\"model.avatar\" class=\"avatar\">\r\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"所属分类\">\r\n                <el-select v-model=\"model.category\" placeholder=\"请选择\">\r\n                    <el-option\r\n                        v-for=\"item in categories\"\r\n                        :key=\"item._id\"\r\n                        :label=\"item.name\"\r\n                        :value=\"item._id\">\r\n                    </el-option>\r\n                </el-select>        \r\n            </el-form-item>\r\n\r\n            <el-form-item label = \"粉丝数\">\r\n                <el-input v-model = \"model.fans\" placeholder=\"请输入作者粉丝数量\" style = \"width: 20rem;\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"播放量\">\r\n                <el-input v-model=\"model.play\" placeholder=\"请输入视频播放量\" style = \"width: 20rem;\"></el-input>\r\n            </el-form-item>    \r\n\r\n            <el-form-item label = \"封面\">\r\n                <span class = \"text-grey fs-xs\">tip:建议使用宽屏图片，宽:高=2:1最佳</span>\r\n                <el-upload\r\n                    class=\"avatar-uploader\"\r\n                    :action=\"uploadURl\"\r\n                    :headers=\"getAuthHeaders()\"\r\n                    :show-file-list=\"false\"\r\n                    :on-success=\"res=>$set(model, 'cover', res.url)\"\r\n                >\r\n                    <img v-if=\"model.cover\" v-lazy=\"model.cover\" class=\"avatar\">\r\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"视频\">\r\n                <el-upload\r\n                    class=\"avatar-uploader\"\r\n                    :action=\"uploadURl\"\r\n                    :show-file-list=\"false\"\r\n                    :headers=\"getAuthHeaders()\"\r\n                    :on-success=\"res=>$set(model, 'video', res.url)\"\r\n                    :before-upload=\"beforeVideo\"\r\n                >\r\n                    <video v-if=\"model.video\" controls :src=\"model.video\" class=\"avatar\"></video>\r\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </el-form-item>\r\n            \r\n\r\n            <el-form-item>\r\n              <el-button type = \"warning\" native-type = \"el-submit\">保存</el-button>  \r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    //props接收id\r\n    //与this.$router.params.id效果相同\r\n    props:{\r\n        id:{}\r\n    },\r\n    data() {\r\n        return {\r\n            model: {\r\n                title: '',\r\n                category: '',\r\n                play: '',\r\n                cover: '',\r\n                video: ''\r\n            },\r\n            categories:[],// 视频分类\r\n        }\r\n    },\r\n    methods: {\r\n        async save() {\r\n            // console.log('save');\r\n            if (!this.model.title) {   \r\n                this.$message.error('视频标题不能为空')\r\n                return\r\n            }\r\n            //根据id判断是新建还是编辑\r\n            let res;\r\n            if (this.id) {\r\n                // 在使用${}使用变量时，要使用``模板字符串\r\n                res = await this.$http.put(`rest/videos/${this.id}`, this.model);\r\n            } else {\r\n                res = await this.$http.post('rest/videos', this.model);\r\n            }\r\n            // 跳转到list页面\r\n            this.$router.push('/videos/list');\r\n            this.$message({\r\n                type:'success',\r\n                message:'保存成功'\r\n            });\r\n        },\r\n        async fetch() {\r\n            const res = await this.$http.get(`rest/videos/${this.id}`);\r\n            this.model = Object.assign({},this.model, res.data);\r\n        },\r\n        async fetchCategories() {\r\n            const res = await this.$http.get(`rest/videos/cate`);\r\n            this.categories = res.data;\r\n        },\r\n         // 文件上传之前做些判断\r\n        beforeVideo (file) {\r\n            if (file.type.indexOf('video') == -1) {\r\n                this.$message.error('上传的文件不符合格式')\r\n                return false\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.id && this.fetch();\r\n        this.fetchCategories();\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoEdit.vue?vue&type=template&id=c5eec6b4&\"\nimport script from \"./VideoEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}