(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42893503"],{"1dde":function(e,t,a){var r=a("d039"),s=a("b622"),l=a("2d00"),n=s("species");e.exports=function(e){return l>=51||!r((function(){var t=[],a=t.constructor={};return a[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,a){var r=a("861d"),s=a("e8b5"),l=a("b622"),n=l("species");e.exports=function(e,t){var a;return s(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?r(a)&&(a=a[n],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var r=a("c04e"),s=a("9bf2"),l=a("5c6c");e.exports=function(e,t,a){var n=r(t);n in e?s.f(e,n,l(0,a)):e[n]=a}},a434:function(e,t,a){"use strict";var r=a("23e7"),s=a("23cb"),l=a("a691"),n=a("50c4"),o=a("7b0b"),i=a("65f0"),c=a("8418"),u=a("1dde"),m=u("splice"),d=Math.max,p=Math.min,f=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var a,r,u,m,b,h,x=o(this),g=n(x.length),y=s(e,g),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=g-y):(a=w-2,r=p(d(l(t),0),g-y)),g+a-r>f)throw TypeError(v);for(u=i(x,r),m=0;m<r;m++)b=y+m,b in x&&c(u,m,x[b]);if(u.length=r,a<r){for(m=y;m<g-r;m++)b=m+r,h=m+a,b in x?x[h]=x[b]:delete x[h];for(m=g;m>g-r+a;m--)delete x[m-1]}else if(a>r)for(m=g-r;m>y;m--)b=m+r-1,h=m+a-1,b in x?x[h]=x[b]:delete x[h];for(m=0;m<a;m++)x[m+y]=arguments[m+2];return x.length=g-r+a,u}})},b0c0:function(e,t,a){var r=a("83ab"),s=a("9bf2").f,l=Function.prototype,n=l.toString,o=/^\s*function ([^ (]*)/,i="name";r&&!(i in l)&&s(l,i,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(e){return""}}})},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},f367:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("h1",[e._v(e._s(e.id?"编辑":"新建")+"职业")]),a("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[a("el-tabs",{attrs:{type:"border-card",value:"basic"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"称号"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"热门"}},[a("el-switch",{model:{value:e.model.hot,callback:function(t){e.$set(e.model,"hot",t)},expression:"model.hot"}})],1),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"avatar",t.url)}}},[e.model.avatar?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.model.avatar,expression:"model.avatar"}],staticClass:"avatar"}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"Banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"banner",t.url)}}},[e.model.banner?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.model.banner,expression:"model.banner"}],staticClass:"avatar"}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"难度"}},[a("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),a("el-form-item",{attrs:{label:"技能"}},[a("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),a("el-form-item",{attrs:{label:"攻击"}},[a("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),a("el-form-item",{attrs:{label:"生存"}},[a("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),a("el-form-item",{attrs:{label:"专精选择"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("el-form-item",{attrs:{label:"介绍视频链接"}},[a("el-input",{model:{value:e.model.video,callback:function(t){e.$set(e.model,"video",t)},expression:"model.video"}})],1),a("el-form-item",{attrs:{label:"对抗技巧"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),a("el-form-item",{attrs:{label:"使用武器"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.model.tools,callback:function(t){e.$set(e.model,"tools",t)},expression:"model.tools"}})],1)],1),a("el-tab-pane",{attrs:{label:"特点",name:"features"}},[a("el-button",{attrs:{plain:"",type:"info",size:"small"},on:{click:function(t){return e.model.features.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加特点 ")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.features,(function(t,r){return a("el-col",{key:r,attrs:{md:12}},[a("el-divider"),a("el-form-item",{attrs:{label:"特点名称"}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t,"icon",a.url)}}},[t.icon?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.icon,expression:"item.icon"}],staticClass:"avatar"}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.features.splice(r,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"搭档",name:"partners"}},[a("el-button",{attrs:{type:"info",plain:"",size:"small"},on:{click:function(t){return e.model.partners.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加搭档 ")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.partners,(function(t,r){return a("el-col",{key:r,attrs:{md:12}},[a("el-form-item",{attrs:{label:"职业"}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.partners.splice(r,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),a("el-form-item",{staticStyle:{"margin-top":"1rem"}},[a("el-button",{attrs:{type:"warning","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},s=[],l=a("1da1"),n=(a("96cf"),a("b0c0"),a("a434"),{props:{id:{}},data:function(){return{items:[],categories:[],heroes:[],model:{name:"",avatar:"",features:[],partners:[],strategies:[],scores:{difficult:0}}}},methods:{save:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.model.name){t.next=3;break}return e.$message.error("职业名称不能为空"),t.abrupt("return");case 3:if(!e.id){t.next=9;break}return t.next=6,e.$http.put("rest/heroes/".concat(e.id),e.model);case 6:t.sent,t.next=12;break;case 9:return t.next=11,e.$http.post("rest/heroes",e.model);case 11:t.sent;case 12:e.$router.push("/heroes/list"),e.$message({type:"success",message:"保存成功"});case 14:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes/".concat(e.id));case 2:a=t.sent,e.model=Object.assign({},e.model,a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCategories:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes/cate");case 2:a=t.sent,e.categories=a.data;case 4:case"end":return t.stop()}}),t)})))()},fetchItems:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items");case 2:a=t.sent,e.items=a.data;case 4:case"end":return t.stop()}}),t)})))()},fetchHeroes:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes");case 2:a=t.sent,e.heroes=a.data;case 4:case"end":return t.stop()}}),t)})))()},addStrategy:function(){this.model.strategies.push({})},delStrategy:function(e){var t=this;this.$confirm("确认要删除该攻略?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.strategies.splice(e,1),t.$message.success("删除成功")}))},beforeVideo:function(e){if(-1==e.type.indexOf("video"))return this.$message.error("上传的文件不符合格式"),!1}},created:function(){this.id&&this.fetch(),this.fetchItems(),this.fetchHeroes(),this.fetchCategories()}}),o=n,i=a("2877"),c=Object(i["a"])(o,r,s,!1,null,"b66d18a2",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-42893503.bffc9b66.js.map